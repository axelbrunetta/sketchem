
    <!DOCTYPE html>
    <html>
    <head>
        <style>
            body, html {
                margin: 0;
                padding: 0;
                overflow: hidden;
            }
            canvas {
                border: 1px solid black;
            }
        </style>
    </head>
    <body>
        <canvas id="drawing-canvas" width="800" height="500"></canvas>
        
        <script>
            // Setup the canvas
            const canvas = document.getElementById('drawing-canvas');
            const ctx = canvas.getContext('2d');
            let isDrawing = false;
            let penWidth = 5;
            
            // Initialize canvas
            ctx.fillStyle = 'white';
            ctx.fillRect(0, 0, canvas.width, canvas.height);
            ctx.lineJoin = 'round';
            ctx.lineCap = 'round';
            ctx.strokeStyle = 'black';
            ctx.lineWidth = penWidth;
            
            // Drawing functions
            function startDrawing(e) {
                isDrawing = true;
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                ctx.beginPath();
                ctx.moveTo(x, y);
                
                // Draw a single dot
                ctx.lineTo(x+0.1, y+0.1);
                ctx.stroke();
            }
            
            function draw(e) {
                if (!isDrawing) return;
                
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                ctx.lineTo(x, y);
                ctx.stroke();
            }
            
            function stopDrawing() {
                isDrawing = false;
                ctx.beginPath();
            }
            
            // Event listeners
            canvas.addEventListener('mousedown', startDrawing);
            canvas.addEventListener('mousemove', draw);
            canvas.addEventListener('mouseup', stopDrawing);
            canvas.addEventListener('mouseout', stopDrawing);
            
            // Touch support
            canvas.addEventListener('touchstart', function(e) {
                e.preventDefault();
                const touch = e.touches[0];
                const mouseEvent = new MouseEvent('mousedown', {
                    clientX: touch.clientX,
                    clientY: touch.clientY
                });
                canvas.dispatchEvent(mouseEvent);
            });
            
            canvas.addEventListener('touchmove', function(e) {
                e.preventDefault();
                const touch = e.touches[0];
                const mouseEvent = new MouseEvent('mousemove', {
                    clientX: touch.clientX,
                    clientY: touch.clientY
                });
                canvas.dispatchEvent(mouseEvent);
            });
            
            canvas.addEventListener('touchend', function(e) {
                e.preventDefault();
                const mouseEvent = new MouseEvent('mouseup');
                canvas.dispatchEvent(mouseEvent);
            });
            
            // Listen for messages from parent window
            window.addEventListener('message', function(event) {
                const data = event.data;
                
                if (data.type === 'setPenWidth') {
                    penWidth = data.width;
                    ctx.lineWidth = penWidth;
                }
                else if (data.type === 'clearCanvas') {
                    ctx.fillStyle = 'white';
                    ctx.fillRect(0, 0, canvas.width, canvas.height);
                    ctx.beginPath();
                }
                else if (data.type === 'getImage') {
                    // Send image data back to parent
                    const imageData = canvas.toDataURL('image/png');
                    window.parent.postMessage({
                        type: 'imageData',
                        data: imageData
                    }, '*');
                }
            });
        </script>
    </body>
    </html>
    